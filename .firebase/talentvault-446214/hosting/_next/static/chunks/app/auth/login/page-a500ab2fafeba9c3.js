(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},2830:(e,t,a)=>{Promise.resolve().then(a.bind(a,8471))},3119:(e,t,a)=>{"use strict";a.d(t,{_:()=>n});var s=a(5704);let n={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBu30v3pgH1S7EwjG_L5x3n04ngD-5VCa8",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"talentvault-446214.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"talentvault-446214",NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:"talentvault-446214.firebasestorage.app",NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:"405116036726",NEXT_PUBLIC_FIREBASE_APP_ID:"1:405116036726:web:c73f8b21785ce4b22a6157",NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID:s.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,FIREBASE_PROJECT_ID:s.env.FIREBASE_PROJECT_ID,FIREBASE_CLIENT_EMAIL:s.env.FIREBASE_CLIENT_EMAIL,FIREBASE_PRIVATE_KEY:s.env.FIREBASE_PRIVATE_KEY,stripeSecretKey:s.env.STRIPE_SECRET_KEY||null,stripeWebhookSecret:s.env.STRIPE_WEBHOOK_SECRET||null,stripeUnlockPriceId:s.env.STRIPE_UNLOCK_PRICE_ID||null,stripeSubLimitedPriceId:s.env.STRIPE_SUB_LIMITED_PRICE_ID||null,stripeSubUnlimitedPriceId:s.env.STRIPE_SUB_UNLIMITED_PRICE_ID||null,siteUrl:s.env.NEXT_PUBLIC_SITE_URL||s.env.SITE_URL||"http://localhost:3000"}},4585:(e,t,a)=>{"use strict";a.d(t,{IG:()=>o,db:()=>u,j2:()=>_});var s=a(2078),n=a(2553),l=a(9708),r=a(9996),i=a(3119);let E={apiKey:i._.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:i._.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:i._.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:i._.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:i._.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:i._.NEXT_PUBLIC_FIREBASE_APP_ID},c=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(E),_=(0,n.xI)(c);(0,n.oM)(_,n.F0);let u=(0,l.aU)(c),o=(0,r.c7)(c)},8471:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),n=a(2115),l=a(63),r=a(2619),i=a.n(r),E=a(4585);let c={jobseeker:"/jobseeker",employer:"/employer",admin:"/admin"};var _=a(3119),u=a(2553),o=a(9708),I=a(5704);function d(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)().get("redirectTo")||"/",[a,r]=(0,n.useState)(!1),[d,m]=(0,n.useState)(null),[S,h]=(0,n.useState)(!1),[p,x]=(0,n.useState)(!1),[N,P]=(0,n.useState)(""),R=e=>e instanceof Error?e.message:"Something went wrong",T=(0,n.useCallback)(async a=>{let s,n=(0,o.H9)(E.db,"profiles",a),l=await (0,o.x7)(n);l.exists()&&(s=l.data().role);let r=t||(s?c[s]:"/");e.replace(s?c[s]:r)},[t,e]);(0,n.useEffect)(()=>{if("true"===I.env.NEXT_PUBLIC_E2E_AUTH_BYPASS)return void e.replace("/jobseeker");if((0,u.Pj)(E.j2,window.location.href)){let e=window.localStorage.getItem("emailForSignIn");e||(e=window.prompt("Please provide your email for confirmation")),e&&(0,u.hK)(E.j2,e,window.location.href).then(e=>{window.localStorage.removeItem("emailForSignIn"),e.user&&T(e.user.uid)}).catch(e=>{m(R(e)),r(!1)})}},[T,e]);let A=async e=>{e.preventDefault();let t=new FormData(e.currentTarget),a=String(t.get("email")||"").trim(),s=String(t.get("password")||"");if(m(null),r(!0),S){let e={url:"".concat(_._.siteUrl,"/auth/callback"),handleCodeInApp:!0};(0,u.MN)(E.j2,a,e).then(()=>{window.localStorage.setItem("emailForSignIn",a),x(!0)}).catch(e=>{m(R(e))}).finally(()=>{r(!1)});return}(0,u.x9)(E.j2,a,s).then(e=>{e.user&&T(e.user.uid)}).catch(e=>{m(R(e))}).finally(()=>{r(!1)})};return(0,s.jsx)("div",{className:"flex min-h-[70vh] items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"card w-full max-w-md p-8",children:[(0,s.jsxs)("div",{className:"mb-6 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Login"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Access your TalentVault account."})]}),p?(0,s.jsx)("p",{className:"text-sm text-green-600 text-center mb-4",children:"A magic link has been sent to your email. Please click it to sign in."}):null,(0,s.jsxs)("form",{className:"space-y-4",onSubmit:A,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Email"}),(0,s.jsx)("input",{name:"email",type:"email",required:!0,className:"input mt-1",defaultValue:N,onChange:e=>P(e.target.value),readOnly:a})]}),!S&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Password"}),(0,s.jsx)("input",{name:"password",type:"password",required:!0,className:"input mt-1"})]}),d?(0,s.jsx)("p",{className:"text-sm text-red-600",children:d}):null,(0,s.jsx)("button",{type:"submit",disabled:a,className:"btn btn-primary w-full",children:a?"Signing in...":"Login"})]}),(0,s.jsx)("div",{className:"mt-4 space-y-2",children:(0,s.jsx)("button",{type:"button",onClick:()=>h(!S),className:"text-sm text-blue-700 hover:underline w-full text-center",children:S?"Use password instead":"Send magic link instead"})}),(0,s.jsxs)("p",{className:"mt-4 text-sm text-center text-slate-600",children:["New here?"," ",(0,s.jsx)(i(),{className:"text-blue-700 hover:underline",href:"/auth/signup",children:"Create an account"})]})]})})}function m(){return(0,s.jsx)(n.Suspense,{fallback:null,children:(0,s.jsx)(d,{})})}}},e=>{e.O(0,[135,563,31,619,441,255,358],()=>e(e.s=2830)),_N_E=e.O()}]);