(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1993:(e,s,t)=>{Promise.resolve().then(t.bind(t,3548))},3548:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var l=t(5155),a=t(2115);function i(e){let{profiles:s}=e,[t,i]=(0,a.useState)(s),[n,d]=(0,a.useState)(null),[r,c]=(0,a.useState)(null),o=async(e,s)=>{d(e),c(null);let t=await fetch("/api/admin/moderate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobseekerId:e,action:s})}),l=await t.json();if(!t.ok){c(l.error||"Action failed"),d(null);return}i(s=>s.map(s=>{var t,a;return s.id===e?{...s,moderation_status:null!=(t=l.moderation_status)?t:s.moderation_status,visibility:null!=(a=l.visibility)?a:s.visibility}:s})),d(null)};return(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Moderate Profiles"}),(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Flag, unflag, or hide Profiles that appear abusive or fake. Hidden Profiles are removed from the directory."})]}),r?(0,l.jsx)("p",{className:"mt-2 text-sm text-red-600",children:r}):null,(0,l.jsx)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:t.map(e=>{var s,t,a;return(0,l.jsxs)("div",{className:"card p-5",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-500",children:(null==(s=e.profiles)?void 0:s.full_name)||"Unknown"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:e.headline}),(0,l.jsxs)("p",{className:"text-xs text-slate-600",children:["Updated ",new Date(e.updated_at).toLocaleDateString()]})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-1 text-xs font-semibold",children:[(0,l.jsxs)("span",{className:"badge",children:["Status: ",e.moderation_status]}),(0,l.jsxs)("span",{className:"badge",children:["Visibility: ",e.visibility]})]})]}),(0,l.jsx)("div",{className:"mt-3 flex flex-wrap gap-2 text-xs text-slate-700",children:null==(t=e.skills)?void 0:t.slice(0,6).map(e=>(0,l.jsx)("span",{className:"badge",children:e},e))}),(0,l.jsxs)("p",{className:"mt-2 text-xs text-slate-600",children:["Experience: ",null!=(a=e.years_experience)?a:"N/A"," yrs â€¢ Location: ",e.location||"Not specified"]}),(0,l.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2 text-xs font-semibold",children:[(0,l.jsx)("button",{onClick:()=>o(e.id,"flag"),disabled:n===e.id,className:"btn btn-secondary text-xs",children:"Flag"}),(0,l.jsx)("button",{onClick:()=>o(e.id,"unflag"),disabled:n===e.id,className:"btn btn-secondary text-xs",children:"Unflag"}),(0,l.jsx)("button",{onClick:()=>o(e.id,"hide"),disabled:n===e.id,className:"btn btn-destructive text-xs",children:"Hide (suspend)"}),(0,l.jsx)("button",{onClick:()=>o(e.id,"unhide"),disabled:n===e.id,className:"btn btn-secondary text-xs",children:"Unhide"})]})]},e.id)})})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=1993)),_N_E=e.O()}]);