(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49824,(e,t,a)=>{"use strict";var n=e.r(86577).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;a.c=function(e){return n.H.useMemoCache(e)}},93120,(e,t,a)=>{"use strict";t.exports=e.r(49824)},40815,e=>{"use strict";var t=e.i(46966),a=e.i(29584),n=e.i(93120),s=e.i(86577),l=e.i(34129),i=e.i(2068),r=e.i(30389);let c={jobseeker:"/jobseeker",employer:"/employer",admin:"/admin"};var o=e.i(27520);e.i(24540);var m=e.i(10500);e.i(75470);var u=e.i(45825);function d(){let e,d,x,f,p,g,S,b,w,j,N,_,y,v,E,T,I,k,A=(0,n.c)(43),C=(0,l.useRouter)(),P=(0,l.useSearchParams)();A[0]!==P?(e=P.get("redirectTo")||"/",A[0]=P,A[1]=e):e=A[1];let U=e,[L,R]=(0,s.useState)(!1),[O,D]=(0,s.useState)(null),[B,F]=(0,s.useState)(!1),[W,H]=(0,s.useState)(!1),[q,K]=(0,s.useState)(""),V=h;A[2]!==U||A[3]!==C?(d=async e=>{let t,a=(0,u.doc)(r.db,"profiles",e),n=await (0,u.getDoc)(a);n.exists()&&(t=n.data().role);let s=U||(t?c[t]:"/");C.replace(t?c[t]:s)},A[2]=U,A[3]=C,A[4]=d):d=A[4];let Y=d;A[5]!==Y||A[6]!==C?(x=()=>{if("true"===t.default.env.NEXT_PUBLIC_E2E_AUTH_BYPASS)return void C.replace("/jobseeker");if((0,m.isSignInWithEmailLink)(r.auth,window.location.href)){let e=window.localStorage.getItem("emailForSignIn");e||(e=window.prompt("Please provide your email for confirmation")),e&&(0,m.signInWithEmailLink)(r.auth,e,window.location.href).then(e=>{window.localStorage.removeItem("emailForSignIn"),e.user&&Y(e.user.uid)}).catch(e=>{D(V(e)),R(!1)})}},f=[Y,C],A[5]=Y,A[6]=C,A[7]=x,A[8]=f):(x=A[7],f=A[8]),(0,s.useEffect)(x,f),A[9]!==Y||A[10]!==B?(p=async e=>{e.preventDefault();let t=new FormData(e.currentTarget),a=String(t.get("email")||"").trim(),n=String(t.get("password")||"");if(D(null),R(!0),B){let e={url:`${o.env.siteUrl}/auth/callback`,handleCodeInApp:!0};(0,m.sendSignInLinkToEmail)(r.auth,a,e).then(()=>{window.localStorage.setItem("emailForSignIn",a),H(!0)}).catch(e=>{D(V(e))}).finally(()=>{R(!1)});return}(0,m.signInWithEmailAndPassword)(r.auth,a,n).then(e=>{e.user&&Y(e.user.uid)}).catch(e=>{D(V(e))}).finally(()=>{R(!1)})},A[9]=Y,A[10]=B,A[11]=p):p=A[11];let G=p;A[12]===Symbol.for("react.memo_cache_sentinel")?(g=(0,a.jsxs)("div",{className:"mb-6 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Login"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Access your TalentVault account."})]}),A[12]=g):g=A[12],A[13]!==W?(S=W?(0,a.jsx)("p",{className:"text-sm text-green-600 text-center mb-4",children:"A magic link has been sent to your email. Please click it to sign in."}):null,A[13]=W,A[14]=S):S=A[14],A[15]===Symbol.for("react.memo_cache_sentinel")?(b=(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Email"}),A[15]=b):b=A[15],A[16]===Symbol.for("react.memo_cache_sentinel")?(w=e=>K(e.target.value),A[16]=w):w=A[16],A[17]!==q||A[18]!==L?(j=(0,a.jsxs)("div",{children:[b,(0,a.jsx)("input",{name:"email",type:"email",required:!0,className:"input mt-1",defaultValue:q,onChange:w,readOnly:L})]}),A[17]=q,A[18]=L,A[19]=j):j=A[19],A[20]!==B?(N=!B&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Password"}),(0,a.jsx)("input",{name:"password",type:"password",required:!0,className:"input mt-1"})]}),A[20]=B,A[21]=N):N=A[21],A[22]!==O?(_=O?(0,a.jsx)("p",{className:"text-sm text-red-600",children:O}):null,A[22]=O,A[23]=_):_=A[23];let M=L?"Signing in...":"Login";A[24]!==L||A[25]!==M?(y=(0,a.jsx)("button",{type:"submit",disabled:L,className:"btn btn-primary w-full",children:M}),A[24]=L,A[25]=M,A[26]=y):y=A[26],A[27]!==G||A[28]!==N||A[29]!==_||A[30]!==y||A[31]!==j?(v=(0,a.jsxs)("form",{className:"space-y-4",onSubmit:G,children:[j,N,_,y]}),A[27]=G,A[28]=N,A[29]=_,A[30]=y,A[31]=j,A[32]=v):v=A[32],A[33]!==B?(E=()=>F(!B),A[33]=B,A[34]=E):E=A[34];let X=B?"Use password instead":"Send magic link instead";return A[35]!==E||A[36]!==X?(T=(0,a.jsx)("div",{className:"mt-4 space-y-2",children:(0,a.jsx)("button",{type:"button",onClick:E,className:"text-sm text-blue-700 hover:underline w-full text-center",children:X})}),A[35]=E,A[36]=X,A[37]=T):T=A[37],A[38]===Symbol.for("react.memo_cache_sentinel")?(I=(0,a.jsxs)("p",{className:"mt-4 text-sm text-center text-slate-600",children:["New here?"," ",(0,a.jsx)(i.default,{className:"text-blue-700 hover:underline",href:"/auth/signup",children:"Create an account"})]}),A[38]=I):I=A[38],A[39]!==v||A[40]!==T||A[41]!==S?(k=(0,a.jsx)("div",{className:"flex min-h-[70vh] items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"card w-full max-w-md p-8",children:[g,S,v,T,I]})}),A[39]=v,A[40]=T,A[41]=S,A[42]=k):k=A[42],k}function h(e){return e instanceof Error?e.message:"Something went wrong"}function x(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(s.Suspense,{fallback:null,children:(0,a.jsx)(d,{})}),t[0]=e):e=t[0],e}e.s(["default",()=>x],40815)}]);